# CutList Optimizer - Status 18 januari 2026

## Project Locatie
`X:\10_3BM_bouwkunde\50_Claude-Code-Projects\CutListOptimizer`

## Huidige Status: Slim Splitsen + Quantity Constraints WERKEND

### Servers
- **Backend:** http://localhost:8000 (start-backend.bat)
- **Frontend:** http://localhost:5173 (start-dev.bat)

---

## Voltooide Verbeteringen Vandaag

### 1. Statistieken uitgebreid
- Format: `8 balken - 11 stukken - 74.1% - 2.35 m rest`

### 2. Niet-geplaatste onderdelen indicator
- Statistiekenbalk toont waarschuwing als onderdelen niet passen

### 3. "Slim Splitsen" Algoritme
**Fixes:**
- Frontend stuurt nu `smart_split` naar backend (was alleen `ortools*`)
- Split logica: max voorraadlengte + rest (was: gelijke delen)

**Testresultaat:**
```
3381mm -> d1: 3050mm, d2: 431mm (met 50mm joint)
3196mm -> d1: 3050mm, d2: 246mm
```

### 4. Quantity Constraints voor ALLE algoritmes (NIEUW)
**Probleem:** Algoritmes gebruikten meer voorraad dan beschikbaar

**Fix:** Inventory tracking toegevoegd aan:
- `_optimize_ffd()`
- `_optimize_hybrid()`
- `_optimize_ortools_optimal()`
- `_optimize_smart_split()` (had al)

**Testresultaat (voorraad: 2x 3050mm, 3x 2440mm):**
```
ffd            : Stock3050:2, Stock2440:3 (totaal: 5)
hybrid         : Stock3050:2, Stock2440:3 (totaal: 5)
smart_split    : Stock3050:2, Stock2440:3 (totaal: 5)
ortools_optimal: Stock3050:2, Stock2440:3 (totaal: 5)
```

---

## Vervolgstappen

### Prio 1: Testen
- [ ] Test met diverse CSV bestanden
- [ ] Vergelijk algoritme resultaten

### Prio 2: Visueel
- [ ] Kleuren per onderdeelgroep (gesplitste delen zelfde kleur)
- [ ] Grid layout voor 2D platen

### Prio 3: UX
- [ ] Split-lijnen in diagram
- [ ] Hover tooltips met verbindingsinfo

---

## Bestanden Aangepast

| Bestand | Wijziging |
|---------|-----------|
| `src/App.jsx` | useBackend check uitgebreid met smart_split |
| `backend/optimizer_1d.py` | _split_part() herschreven, quantity tracking alle algoritmes |
| `src/components/CuttingDiagram.jsx` | Statistieken + niet-geplaatste indicator |
| `src/components/SettingsPanel.jsx` | Smart Split als eerste optie |

---

## Startup

```powershell
# Backend
Start-Process cmd "/c cd /d X:\10_3BM_bouwkunde\50_Claude-Code-Projects\CutListOptimizer && start-backend.bat"

# Frontend
Start-Process cmd "/c cd /d X:\10_3BM_bouwkunde\50_Claude-Code-Projects\CutListOptimizer && start-dev.bat"
```
